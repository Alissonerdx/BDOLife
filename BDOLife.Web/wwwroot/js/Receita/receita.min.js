function SubtrairQuantidade(n,t){let i=BuscarIngredientePorId(n);if(i!==null&&i!==undefined){let r=Inputmask.unmask(`${i.quantidadeTotal}`,{alias:"prata"}),n=parseInt(r)-parseInt(t);n===0?$("#ingredientesGrid").jsGrid("deleteItem",i):(i.quantidadeTotal=n,$("#ingredientesGrid").jsGrid("updateItem",i))}}function AtualizarTotais(){let n=$("#resultadosGrid").jsGrid("option","data"),t=$("#ingredientesGrid").jsGrid("option","data");CalcularTotais(t,n)}function CalcularTotais(n,t){let i=0,r=0;if(n!==undefined&&n.length>0){for(let t=0;t<n.length;t++)if(n[t].ignorar===!1){let r=parseInt(Inputmask.unmask(`${n[t].quantidadeTotal}`,{alias:"prata"})),u=parseInt(Inputmask.unmask(`${n[t].precoMarket}`,{alias:"prata"})),f=r*u;i+=f}$("#custoTotal").html(Inputmask.format(`${i}`,{alias:"prata"}))}else $("#custoTotal").html(Inputmask.format("0",{alias:"prata"}));if(t!==undefined&&t.length>0){for(let n=0;n<t.length;n++)if(t[n].ignorar===!1){let i=parseInt(Inputmask.unmask(`${t[n].quantidade}`,{alias:"prata"})),u=parseInt(Inputmask.unmask(`${t[n].preco}`,{alias:"prata"}));r+=i*u}$("#lucroBruto").html(Inputmask.format(`${r}`,{alias:"prata"}))}else $("#lucroBruto").html(Inputmask.format("0",{alias:"prata"}));let u=parseInt(r*.845-i),f=parseInt(r*.65-i);u<0?($("#lucroComPctEconomico").removeClass("valor-positivo"),$("#lucroComPctEconomico").addClass("valor-negativo"),$("#lucroComPctEconomico").html("-"+Inputmask.format(`${u}`,{alias:"prata"}))):($("#lucroComPctEconomico").removeClass("valor-negativo"),$("#lucroComPctEconomico").addClass("valor-positivo"),$("#lucroComPctEconomico").html(Inputmask.format(`${u}`,{alias:"prata"})));f<0?($("#lucroSemPctEconomico").removeClass("valor-positivo"),$("#lucroSemPctEconomico").addClass("valor-negativo"),$("#lucroSemPctEconomico").html("-"+Inputmask.format(`${f}`,{alias:"prata"}))):($("#lucroSemPctEconomico").removeClass("valor-negativo"),$("#lucroSemPctEconomico").addClass("valor-positivo"),$("#lucroSemPctEconomico").html(Inputmask.format(`${f}`,{alias:"prata"})))}function ConfigurarMaestriaImperial(){$("#configuracaoMaestria").iziModal("open")}function SalvarMaestriaImperial(){maestriaImperialSelecionada=parseInt($("#maestriaImperialSelect").val());$("#configuracaoMaestria").iziModal("close")}function BuscarIngredientePorId(n){var t=$("#ingredientesGrid").jsGrid("option","data");return t.filter(t=>t.id===n)[0]}function AdicionarQuantidade(n){let r="",i=[],t=n;n.original!==null&&n.original!==undefined?(i=n.original.id.split("-"),r=i[i.length-1],t=n.original):(i=n.id.split("-"),r=i[i.length-1]);let u=BuscarIngredientePorId(r);if(u===null||u===undefined){let n=Inputmask.format(`${parseInt(t.quantidade)*parseInt(t.valor)}`,{alias:"prata"});$("#ingredientesGrid").jsGrid("insertItem",{id:r,img:t.icon,item:t.nomeItem,quantidadeTotal:t.quantidade,precoMarket:t.valor,precoTotal:n,dataAtualizacao:t.dataAtualizacao,quantidadeDisponivel:t.quantidadeDisponivel,vendeNPC:t.vendeNPC,localNPC:t.localNPC,valorNPC:t.valorNPC,ignorar:!1})}else u.quantidadeTotal+=parseInt(t.quantidade),$("#ingredientesGrid").jsGrid("updateItem",u)}function AlterarIngrediente(){if(ingredienteNodeSelecionado!==null){let i=$("#trocarIngrediente").find("#ingredienteAlternativo").select2("data")[0],t=$("#trocarIngrediente").find("#quantidadeIngrediente").val(),r=$("#trocarIngrediente").find("#precoUnitario").val(),u=ingredienteNodeSelecionado.parent,f=$("#treeViewContent").jstree("get_node",u),e=f.original.quantidade,n=BuscarIngredientePorId(ingredienteNodeSelecionado.id);n!==undefined&&n!==null&&(console.log(n),SubtrairTrocaItem(n));let o=parseInt(e)*parseInt(t);BuscarTreeView(ingredienteNodeSelecionado.parent,i.id,$("#proc-normal").val(),o,parseInt(t)).then(function(n){let t=$("#treeViewContent").jstree("get_children_dom",ingredienteNodeSelecionado.original);t.each(function(n,t){SubtrairTrocaItem(t)});$("#treeViewContent").jstree("delete_node",`#${ingredienteNodeSelecionado.id}`);n.forEach(function(n,t){t===0&&(n.valor=parseInt(Inputmask.unmask(`${r}`,{alias:"prata"})));$("#treeViewContent").jstree("create_node",n.parent==="#"?"raiz":n.parent,n,"inside");console.log(n)})});$("#trocarIngrediente").iziModal("close")}}function BuscarTreeView(n,t,i,r,u){return BlockElement("#treeView"),$.ajax({type:"POST",url:"/Receita/TreeViewSubReceita",data:{raiz:n,receitaReferenciaId:t,quantidadePorReceita:u,quantidade:r,procNormal:i},success:function(){UnblockElement("#treeView")}})}function SubtrairTrocaItem(n){let i=$("#treeViewContent").jstree("get_node",n),r=i.original.id.split("-"),u=r[r.length-1],f=$("#treeViewContent").jstree("get_children_dom",i),t=[];for(f.each(function(n,i){t.push($("#treeViewContent").jstree("get_node",i))});t.length>0;){let n=t.pop();if($("#treeViewContent").jstree("is_leaf",n)){let t=n.original.id.split("-"),i=t[t.length-1];SubtrairQuantidade(i,n.original.quantidade)}else{$("#treeViewContent").jstree("open_all",n);let i=$("#treeViewContent").jstree("get_children_dom",n);i.each(function(n,i){t.push($("#treeViewContent").jstree("get_node",i))})}}let e=BuscarIngredientePorId(u);SubtrairQuantidade(u,i.original.quantidade)}var maestriaImperialSelecionada=0,ingredienteNodeSelecionado=null,pagina=window.location.pathname,placeholderMaestria="",tipoReceita=0;$(document).ready(function(){function n(){pagina.toLowerCase().includes("culinaria")?(placeholdeMaestria="Selecione a maestria (Culinária)",tipoReceita=2):pagina.toLowerCase().includes("alquimia")&&(placeholdeMaestria="Selecione a maestria (Alquimia)",tipoReceita=1)}function t(){$("#trocarIngrediente").iziModal({title:"Alterar ingrediente",background:"#494C56",headerColor:"#33363F",width:"80%",radius:20,top:50,closeOnEscape:!1,overlayClose:!1,onOpening:function(){let u=$("#treeViewContent").jstree("get_selected")[0],t=$("#treeViewContent").jstree("get_node",u),i=t.parent.split("-"),r=i[i.length-1],n=$("#treeViewContent").jstree("get_node",t.parent);while((r.includes("PCH")||r.includes("PDE")||r.includes("RFI")||r.includes("PMO"))&&n.original.grupo!==null&&n.original.grupo!==undefined&&n.original.grupo!=="")t=n,i=n.parent.split("-"),r=i[i.length-1],n=$("#treeViewContent").jstree("get_node",n.parent);ingredienteNodeSelecionado=t;$("#trocarIngrediente").find("#grupoItemTrocaSelecionado").val(t.original.grupo)},afterRender:function(){$("#quantidadeIngrediente").inputmask({alias:"integer",allowMinus:!1,mask:"9999999"});$("#precoUnitario").inputmask({alias:"prata"});$("#trocarIngrediente").find("#ingredienteAlternativo").data("select2")&&$("#trocarIngrediente").find("#ingredienteAlternativo").val("").trigger("change");$("#ingredienteAlternativo").select2({placeholder:"Selecione o ingrediente",language:"pt-BR",width:"100%",dropdownCssClass:"increasedzindexclass",templateResult:formatState,templateSelection:formatState,ajax:{url:"/Item/SelectItensPorGrupo",type:"GET",data:function(n){return{search:n.term,page:n.page||1,grupo:$("#trocarIngrediente").find("#grupoItemTrocaSelecionado").val()}},processResults:function(n){return{results:n}}}});$("#ingredienteAlternativo").on("select2:select",function(){let n=$(this).select2("data")[0],t=n.valor;$("#precoUnitario").val(t)})}});$("#configuracaoMaestria").iziModal({title:"Configuração da Maestria",background:"#494C56",headerColor:"#33363F",radius:20,top:50,afterRender:function(){$("#maestriaImperialSelect").select2({placeholder:"Selecione a maestria (Entrega Imperial)",language:"pt-BR",width:"100%",dropdownCssClass:"increasedzindexclass",templateResult:formatState,templateSelection:formatState,allowClear:!0,ajax:{url:"/Maestria/SelectMaestrias",type:"GET",data:function(){return{tipo:tipoReceita}},processResults:function(n){return n}}})}})}function i(){setInterval(AtualizarTotais,1e3)}function r(){$("#maestriaSelect").on("change",function(){let n=$(this).select2("data")[0];n!==undefined&&($("#proc-normal").inputmask("setvalue",n.procNormal),$("#proc-raro").inputmask("setvalue",n.procRaro),$("#proc-normal").focus(),$("#proc-raro").focus())});$("#consultarForm").on("submit",function(n){n.preventDefault();$("#ingredientesGrid").jsGrid("loadData");$("#resultadosGrid").jsGrid("loadData");$("#resultadosImperialGrid").jsGrid("loadData");$("#treeViewContent").jstree(!0).refresh()})}function u(){$("#receitaSelect").select2({placeholder:"Selecione a receita",language:"pt-BR",width:"100%",allowClear:!0,cacheDataSource:[],escapeMarkup:function(n){return n}});$("#maestriaSelect").select2({placeholder:placeholderMaestria,language:"pt-BR",width:"100%",templateResult:formatState,templateSelection:formatState,allowClear:!0,ajax:{url:"/Maestria/SelectMaestrias",type:"GET",data:function(){return{tipo:tipoReceita}},processResults:function(n){return n}}})}function f(){$("#treeview-search").keyup(function(){$("#treeViewContent").jstree("search",$(this).val())});$("#treeViewContent").jstree({core:{dblclick_toggle:!1,animation:0,check_callback:!0,themes:{responsive:!0},data:function(n,t){BlockElement("#treeView");$.ajax({type:"POST",url:"/Receita/TreeView",data:{receitaReferenciaId:$("#receitaSelect").val(),quantidade:parseInt($("#quantidade").inputmask("unmaskedvalue")),procNormal:$("#proc-normal").val()},success:function(n){t(n);UnblockElement("#treeView")}})}},types:{},plugins:["contextmenu","search",],search:{case_insensitive:!0,show_only_matches:!0},contextmenu:{items:function(n){let t=n.original.grupo;return t!==null&&t!==""&&n.id!=="raiz"?{TrocarIngrediente:{separator_before:!1,separator_after:!1,label:"Trocar Ingrediente",icon:"/imagens/icones/troca.svg",action:function(){$("#trocarIngrediente").iziModal("open")}}}:null}}});$("#treeViewContent").on("open_node.jstree",function(n,t){let i=t.node.original,r=i.id.split("-"),u=r[r.length-1],f=$("#treeViewContent").jstree("get_children_dom",i);if($("#treeViewContent").jstree(!0).get_parent(t.node)!=="#"){let n=BuscarIngredientePorId(u),t=[];for(f.each(function(n,i){t.push($("#treeViewContent").jstree("get_node",i))});t.length>0;){let n=t.pop();if($("#treeViewContent").jstree("is_leaf",n)){let t=n.original.id.split("-"),i=t[t.length-1];AdicionarQuantidade(n)}else{let i=$("#treeViewContent").jstree("get_children_dom",n);i.each(function(n,i){t.push($("#treeViewContent").jstree("get_node",i))})}}if(n!==null&&n!==undefined){let r=Inputmask.unmask(`${n.quantidadeTotal}`,{alias:"prata"}),t=parseInt(r)-parseInt(i.quantidade);t===0?$("#ingredientesGrid").jsGrid("deleteItem",n):(n.quantidadeTotal=t,$("#ingredientesGrid").jsGrid("updateItem",n))}}});$("#treeViewContent").bind("selected_node.jstree",function(n,t){for(var r=$("#treeViewContent").jstree(!0).get_json(t.node.id,{flat:!0}),i=0;i<r.length;i++)console.log(r[i])});$("#treeViewContent").on("close_node.jstree",function(n,t){console.log(t);let i=t.node.original,r=i.id.split("-"),u=r[r.length-1],f=$("#treeViewContent").jstree("get_children_dom",i);if($("#treeViewContent").jstree(!0).get_parent(t.node)!=="#"){let n=[];for(f.each(function(t,i){n.push($("#treeViewContent").jstree("get_node",i))});n.length>0;){let t=n.pop();if($("#treeViewContent").jstree("is_leaf",t)){let n=t.original.id.split("-"),i=n[n.length-1];SubtrairQuantidade(i,t.original.quantidade)}else{$("#treeViewContent").jstree("open_all",t);let i=$("#treeViewContent").jstree("get_children_dom",t);i.each(function(t,i){n.push($("#treeViewContent").jstree("get_node",i))})}}let r=BuscarIngredientePorId(u);if(r===null||r===undefined){let n=Inputmask.format(`${parseInt(i.quantidade)*parseInt(i.valor)}`,{alias:"prata"});var e=t.node;$("#ingredientesGrid").jsGrid("insertItem",{id:u,img:i.icon,item:i.nomeItem,quantidadeTotal:i.quantidade,precoMarket:i.valor,precoTotal:n,dataAtualizacao:i.dataAtualizacao,quantidadeDisponivel:i.quantidadeDisponivel,vendeNPC:i.vendeNPC,localNPC:i.localNPC,valorNPC:i.valorNPC,ignorar:!1})}else r.quantidadeTotal+=parseInt(i.quantidade),$("#ingredientesGrid").jsGrid("updateItem",r)}});$("#treeViewContent").on("expandir",function(n){n.preventDefault();let r=$("#treeViewContent").jstree("get_node","raiz_anchor"),i=r.children;for(var t=0;t<i.length;t++)$("#treeViewContent").jstree("open_node",i[t])});$("#treeViewContent").on("agrupar",function(n){n.preventDefault();let i=$("#treeViewContent").jstree("get_node","raiz_anchor");if(i.state.opened!==!1){let n=i.children,r=n.every(function(n){let t=$("#treeViewContent").jstree("get_node",n);return t.state.opened===!1});if(!r){$("#ingredientesGrid").jsGrid("option","data",[]);for(var t=0;t<n.length;t++){let i=$("#treeViewContent").jstree("get_node",n[t]);$("#treeViewContent").jstree("close_node",i)}}}});$("#ingredientesGrid").off().on("keydown","input[type=text], input[type=number], select",n=>{n.which===13&&$("#ingredientesGrid").jsGrid("updateItem")});$("#resultadosGrid").off().on("keydown","input[type=text], input[type=number], select",n=>{n.which===13&&$("#resultadosGrid").jsGrid("updateItem")})}function e(){$("#ingredientesGrid").jsGrid({width:"100%",inserting:!1,editing:!0,sorting:!1,paging:!1,autoload:!1,selecting:!1,pageLoading:!1,confirmDeleting:!1,onItemUpdated:function(){$("#ingredientesGrid").jsGrid("refresh")},onRefreshed:function(n){var r=n.grid.option("data"),i={Id:"",Img:"",Item:"",QuantidadeTotal:0,PrecoMarket:0,PrecoTotal:0,IsTotal:!0},t;r.forEach(function(n){let t=0,r=0;t=typeof n.precoMarket=="string"?parseInt(Inputmask.unmask(n.precoMarket,{alias:"prata"})):n.precoMarket;r=typeof n.quantidadeTotal=="string"?parseInt(Inputmask.unmask(n.quantidadeTotal,{alias:"prata"})):n.quantidadeTotal;n.ignorar===!1&&(i.PrecoTotal+=r*t)});t=$("<tr>").addClass("total-row");n.grid._renderCells(t,i);n.grid._content.append(t);$(".receita-image").hover(function(){let i=$(this).attr("data-nome"),r=Inputmask.format(`${$(this).attr("data-valor")}`,{alias:"prata"}),u=$(this).attr("data-atualizacao"),f=Inputmask.format(`${$(this).attr("data-quantidadeDisponivel")}`,{alias:"prata"}),e=$(this).attr("data-npc"),o=$(this).attr("data-valor-npc"),n=$(this).attr("data-local-npc"),s=$(this).attr("data-disponivel"),t="";if(e==="true"&&o!==null&&(t='<p class="text-center">VENDIDO NO NPC:<\/p>',n!==null&&n!=="")){let i=n.split("|");i.forEach(function(n){t+=`${n}`})}$(this).popover({title:i,html:!0,content:`<p>Qtd. Disponível no Mercado: ${f}</p> <p>Valor Unitário: ${r}</p> <p>Atualizado em: ${u}</p>${t}`,trigger:"hover",placement:"right"}).popover("show")})},fields:[{name:"id",visible:!1},{name:"img",align:"center",title:"",width:80,itemTemplate:function(n,t){if(t.IsTotal)return"Totais";let i=Inputmask.format(`${t.precoMarket}`,{alias:"prata"});return t.img!==null&&t.img!==undefined&&t.img!==""?`<img class="receita-image" data-nome="${t.item}" data-quantidadeDisponivel="${t.quantidadeDisponivel}" data-disponivel="${t.disponivel?"DISPONIVEL":"INDISPONIVEL"}" data-atualizacao="${t.dataAtualizacao}" data-valor="${i}" src="${t.img}" data-npc="${t.vendeNPC}" data-valor-npc="${t.valorNPC}" data-local-npc="${t.localNPC}" style="max-width: 44px;"/>`:`<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsBAMAAADsqkcyAAAAFVBMVEXr6+sAAABYWFiSkpKwsLDNzc11dXVUvnWIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAOElEQVQokWNgGAUjAjABITINBcZAyMLgAKYRgCWYJRgkB6HhgNnN2Q2kFEIjiQMhyBAQPQoGPQAAoJ4FT0msjZwAAAAASUVORK5CYII=" style="max-width: 44px;"/>`}},{name:"item",title:"Ingrediente",type:"text",width:160,editing:!1,inserting:!1,itemTemplate:function(n,t){return t.IsTotal?"":n}},{name:"quantidadeTotal",type:"prataField",title:"Quantidade Necessária",width:180,itemTemplate:function(n,t){return t.IsTotal?"":Inputmask.format(`${n}`,{alias:"prata"})}},{name:"precoMarket",type:"prataField",title:"Custo no Mercado (UN)",width:180,itemTemplate:function(n,t){return t.IsTotal?"":Inputmask.format(`${n}`,{alias:"prata"})}},{name:"precoTotal",type:"prataField",title:"Custo Total",width:120,editing:!1,inserting:!1,itemTemplate:function(n,t){if(t.IsTotal)return Inputmask.format(`${t.PrecoTotal}`,{alias:"prata"});let i=parseInt(Inputmask.unmask(`${t.precoMarket}`,{alias:"prata"})),r=parseInt(Inputmask.unmask(`${t.quantidadeTotal}`,{alias:"prata"}));return Inputmask.format(`${r*i}`,{alias:"prata"})}},{name:"ignorar",type:"checkbox",title:"Ignorar",width:120,itemTemplate:function(n,t){return t.IsTotal?"":$("<input>").prop("type","checkbox").attr("checked",n).attr("disabled",!0)}},{type:"control",deleteButton:!1,editButton:!1,itemTemplate:function(){return jsGrid.fields.control.prototype.itemTemplate.apply(this,arguments)}}],controller:{loadData:function(){BlockElement("#consultarForm");var n=$.Deferred();return $.post({url:"/Receita/Ingredientes",data:{receitaReferenciaId:$("#receitaSelect").val(),quantidade:parseInt($("#quantidade").inputmask("unmaskedvalue")),procNormal:$("#proc-normal").val()},dataType:"json"}).done(function(t){n.resolve(t);UnblockElement("#consultarForm")}),n.promise()}}});$("#resultadosGrid").jsGrid({width:"100%",inserting:!1,editing:!0,sorting:!1,paging:!1,autoload:!0,selecting:!1,pageLoading:!1,onItemUpdated:function(){$("#resultadosGrid").jsGrid("refresh")},onRefreshed:function(n){var r=n.grid.option("data"),t={Img:"",Item:"",Quantidade:0,Preco:0,Total:0,QuantidadePorCaixaImperial:0,CaixaImperial:"",QuantidadeImperial:0,ValorPorCaixa:0,PrecoPorCaixa:0,TotalImperial:0,IsTotal:!0},i;r.forEach(function(n){let i=0,r=0;i=typeof n.preco=="string"?parseInt(Inputmask.unmask(n.preco,{alias:"prata"})):n.preco;r=typeof n.quantidade=="string"?parseInt(Inputmask.unmask(n.quantidade,{alias:"prata"})):n.quantidade;n.ignorar===!1&&(t.QuantidadeImperial+=n.quantidadeImperial,t.Total+=r*i,t.TotalImperial+=n.quantidadeImperial*n.precoPorCaixa,t.PrecoPorCaixa=n.precoPorCaixa)});i=$("<tr>").addClass("total-row");n.grid._renderCells(i,t);n.grid._content.append(i)},fields:[{name:"img",align:"center",title:"",width:80,itemTemplate:function(n,t){return t.IsTotal?"Totais":t.img!==null&&t.img!==undefined&&t.img!==""?`<img src="${t.img}" style="max-width: 44px;"/>`:`<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACwAAAAsBAMAAADsqkcyAAAAFVBMVEXr6+sAAABYWFiSkpKwsLDNzc11dXVUvnWIAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAOElEQVQokWNgGAUjAjABITINBcZAyMLgAKYRgCWYJRgkB6HhgNnN2Q2kFEIjiQMhyBAQPQoGPQAAoJ4FT0msjZwAAAAASUVORK5CYII=" style="max-width: 44px;"/>`}},{name:"item",title:"Produzido",type:"text",width:160,editing:!1,inserting:!1,itemTemplate:function(n,t){return t.IsTotal?"":n}},{name:"quantidade",type:"prataField",title:"Qtd. Produzida",width:120,itemTemplate:function(n,t){return t.IsTotal?"":Inputmask.format(`${n}`,{alias:"prata"})}},{name:"preco",type:"prataField",title:"Preço Mercado",width:120,itemTemplate:function(n,t){return t.IsTotal?"":Inputmask.format(`${n}`,{alias:"prata"})}},{name:"total",type:"prataField",title:"Lucro Bruto",width:120,editing:!1,inserting:!1,itemTemplate:function(n,t){if(t.IsTotal)return Inputmask.format(`${t.Total}`,{alias:"prata"});let i=parseInt(Inputmask.unmask(`${t.preco}`,{alias:"prata"})),r=parseInt(Inputmask.unmask(`${t.quantidade}`,{alias:"prata"})),u=r*i;return Inputmask.format(`${u}`,{alias:"prata"})}},{name:"quantidadePorCaixaImperial",type:"text",title:"Caixa Imperial",visible:!1,width:120,editing:!1,inserting:!1,itemTemplate:function(n,t){return t.IsTotal?"":n}},{name:"caixaImperial",type:"text",title:"Caixa Imperial",width:120,editing:!1,inserting:!1,itemTemplate:function(n,t){return t.IsTotal?"":n}},{name:"quantidadeImperial",type:"prataField",title:"Qtd. Caixa Imperial",width:160,editing:!1,inserting:!1,itemTemplate:function(n,t){return t.IsTotal?`${t.QuantidadeImperial} x ${Inputmask.format(`${t.PrecoPorCaixa}`,{alias:"prata"})} = ${Inputmask.format(`${t.TotalImperial}`,{alias:"prata"})}`:n}},{name:"precoPorCaixa",type:"prataField",title:"Valor/Caixa",width:120,editing:!1,inserting:!1,itemTemplate:function(n,t){return t.IsTotal?"":Inputmask.format(`${n}`,{alias:"prata"})}},{name:"totalImperial",type:"prataField",title:"Valor/Caixa",width:120,visible:!1,editing:!1,inserting:!1},{name:"ignorar",type:"checkbox",title:"Ignorar",width:120,itemTemplate:function(n,t){return t.IsTotal?"":$("<input>").prop("type","checkbox").attr("checked",n).attr("disabled",!0)}},{type:"control",deleteButton:!1,editButton:!1,itemTemplate:function(n,t){if(t.IsTotal)return"";return jsGrid.fields.control.prototype.itemTemplate.apply(this,arguments)}}],controller:{loadData:function(){BlockElement($("#resultados"));var n=$.Deferred();return $.post({url:"/Receita/Resultados",data:{tipoReceita:tipoReceita,receitaReferenciaId:$("#receitaSelect").val(),quantidade:parseInt($("#quantidade").inputmask("unmaskedvalue")),procNormal:$("#proc-normal").val(),procRaro:$("#proc-raro").val(),maestria:$("#maestriaSelect").val(),maestriaImperial:maestriaImperialSelecionada},dataType:"json"}).done(function(t){n.resolve(t);UnblockElement($("#resultados"))}),n.promise()}}})}n();e();u();r();f();i();t()});